<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>blocks</title>
    <script async src="https://unpkg.com/es-module-shims@1.5.8/dist/es-module-shims.js"></script>
    <script type="importmap">{
  "imports": {
    "@symbiotejs/symbiote": "https://cdn.skypack.dev/-/@symbiotejs/symbiote@v1.10.6-apukuw5vDJ409qroKUtX/dist=es2019,mode=imports,min/optimized/@symbiotejs/symbiote.js",
    "@uploadcare/upload-client": "https://ga.jspm.io/npm:@uploadcare/upload-client@4.3.1/dist/index.browser.js"
  }
}
</script>
    <script type="module" src="https://unpkg.com/@re4ma/re4ma@0.1.7/build/re4ma.js"></script>
    <script type="module">
      import { LiveHtml } from '../../blocks/LiveHtml/LiveHtml.js';
      LiveHtml.reg('lr-live-html');
    </script>
    <style> @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');:root{--clr-bg:rgb(31 29 29);--clr-font:rgb(224 253 255);--clr-link:rgb(253 255 139);--clr-panel:rgb(255 255 255 / 10%);--clr-accent:rgb(233 159 255);--clr-accent-shade:rgb(233 159 255 / 6%);--clr-code:#fff;--clr-code-hl:rgb(255 112 112);--gap-min:2px;--gap-mid:10px;--gap-max:20px;--gap-huge:60px;}html,body{margin:0;padding:0;color:var(--clr-font);font-family:Roboto,sans-serif;background-color:var(--clr-bg);}body{display:grid;grid-template-rows:min-content min-content auto min-content;min-height:100vh;}header{padding:20px;background-color:rgba(0,0,0,.4);}nav{--l-bg-clr:rgba(60,60,60,.9);--blur:6px;display:flex;justify-content:center;position:sticky;z-index:10000;top:0;background-color:var(--l-bg-clr);height:100%;}@supports ((-webkit-backdrop-filter:blur(var(--blur))) or (backdrop-filter:blur(var(--blur)))){nav{--l-bg-clr:rgba(255,255,255,.1);backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));}}nav > div{display:flex;justify-content:space-around;align-items:center;width:100%;max-width:1080px;}nav a{display:block;color:var(--clr-font);margin:20px;text-decoration:none;text-shadow:1px 1px 2px rgba(0,0,0,.6);}main{display:flex;justify-content:center;padding:20px;}col-css{display:block;max-width:1080px;width:100%;}footer{padding:20px;background-color:rgba(0,0,0,.2);}lr-live-html{min-height:400px;}main a{color:var(--clr-link);}code{display:block;background-color:#000;color:var(--clr-code);padding:var(--gap-max);overflow-x:auto;}code .hl{color:var(--clr-code-hl);}code:not([class]){display:inline-block;padding:var(--gap-min);padding-left:.5em;padding-right:.5em;}blockquote{display:block;color:var(--clr-accent);background-color:var(--clr-accent-shade);padding:var(--gap-mid);margin:0;margin-top:var(--gap-max);border-left:var(--gap-min) solid currentColor;}h1{color:var(--clr-accent);}h2{margin-top:calc(var(--gap-max) * 3);}li{margin-bottom:var(--gap-mid);}table{width:100%;}th{padding:10px;background:rgba(0,0,0,.4);}td{padding:10px;background:rgba(255,255,255,.1);}tr:hover{background:rgba(255,255,255,.1);}lr-live-html{display:grid;grid-template-columns:50% 50%;box-shadow:0 5px 16px rgb(0 0 0 / 60%);}lr-live-html [contenteditable]{padding:20px;overflow:auto;color:rgb(255 255 255);font-size:14px;font-family:monospace;white-space:pre;background-color:#000;outline:none;}lr-live-html [contenteditable] .hljs-string{color:rgb(251,182,79);}lr-live-html [contenteditable] .hljs-comment{color:rgb(149,149,149);font-style:italic;}lr-live-html [contenteditable] .hljs-attr{color:rgb(138,218,172);}lr-live-html [contenteditable] .hljs-function{color:rgb(239,235,149);}lr-live-html [contenteditable] .hljs-variable{color:rgb(121,183,255);}lr-live-html [contenteditable] .hljs-title{color:rgb(180,243,255);}lr-live-html [contenteditable] .hljs-property{color:rgb(238,131,252);}lr-live-html [contenteditable] .hljs-keyword{color:rgb(254,165,176);}lr-live-html [contenteditable] .hljs-tag{color:rgb(254,165,176);}lr-live-html [contenteditable] .hljs-name{color:rgb(165,245,254);}lr-live-html iframe{display:block;width:100%;height:100%;background-color:#fff;border:0;}lr-live-html{display:grid;grid-template-columns:50% 50%;box-shadow:0 5px 16px rgb(0 0 0 / 60%);}code{padding:20px;overflow:auto;color:rgb(255 255 255);font-size:14px;font-family:monospace;white-space:pre;background-color:#000;outline:none;}code .hljs-string{color:rgb(251,182,79);}code .hljs-comment{color:rgb(149,149,149);font-style:italic;}code .hljs-attr{color:rgb(138,218,172);}code .hljs-function{color:rgb(239,235,149);}code .hljs-variable{color:rgb(121,183,255);}code .hljs-title{color:rgb(180,243,255);}code .hljs-property{color:rgb(238,131,252);}code .hljs-keyword{color:rgb(254,165,176);}code .hljs-tag{color:rgb(254,165,176);}code .hljs-name{color:rgb(165,245,254);}lr-live-html iframe{display:block;width:100%;height:100%;background-color:#fff;border:0;}</style>
  </head>
  <body>
    <header>ðŸŸ¡ Uploadcare | blocks</header>
    <nav>
      <div>
        <a href="../../">Home</a>
        <a href="../../solutions/">Solutions</a>
        <a href="../../blocks/">Blocks</a>
        <a href="../../toc.html">TOC</a>
        <a href="//github.com/uploadcare/blocks/discussions">Discussions</a>
      </div>
    </nav>
    <main>
      <col-css><h1 id="configuration">Configuration</h1>
<p>We use the Data-in-CSS approach to set configurations.</p>
<p>This is the list of pre-defined parameters used by default in our uploader builds:</p>
<pre><code class="language-css"><span class="hljs-selector-pseudo">:where</span>(<span class="hljs-selector-class">.lr-wgt-cfg</span>, <span class="hljs-selector-class">.lr-wgt-common</span>),
<span class="hljs-selector-pseudo">:host</span> {
  <span class="hljs-attr">--cfg-pubkey</span>: <span class="hljs-string">&#x27;YOUR_PUBLIC_KEY&#x27;</span>;
  <span class="hljs-attr">--cfg-multiple</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--cfg-multiple-min</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--cfg-multiple-max</span>: <span class="hljs-number">0</span>;

  <span class="hljs-attr">--cfg-confirm-upload</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--cfg-img-only</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--cfg-accept</span>: <span class="hljs-string">&#x27;&#x27;</span>;
  <span class="hljs-attr">--cfg-store</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--cfg-camera-mirror</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--cfg-source-list</span>: <span class="hljs-string">&#x27;local, url, camera, dropbox, gdrive, facebook&#x27;</span>;
  <span class="hljs-attr">--cfg-max-local-file-size-bytes</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--cfg-thumb-size</span>: <span class="hljs-number">76</span>;
  <span class="hljs-attr">--cfg-show-empty-list</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--cfg-use-local-image-editor</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--cfg-use-cloud-image-editor</span>: <span class="hljs-number">1</span>;

  <span class="hljs-attr">--cfg-modal-scroll-lock</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--cfg-modal-backdrop-strokes</span>: <span class="hljs-number">1</span>;

  <span class="hljs-attr">--cfg-source-list-wrap</span>: <span class="hljs-number">1</span>;

  <span class="hljs-attr">--cfg-init-activity</span>: <span class="hljs-string">&#x27;start-from&#x27;</span>;
  <span class="hljs-attr">--cfg-done-activity</span>: <span class="hljs-string">&#x27;start-from&#x27;</span>;

  <span class="hljs-attr">--cfg-data-output-console</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--cfg-data-output-fire-events</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--cfg-data-output-from</span>: <span class="hljs-string">&#x27;*dataOutput&#x27;</span>;
  <span class="hljs-attr">--cfg-data-output-form-value</span>: <span class="hljs-number">1</span>;

  <span class="hljs-attr">--cfg-remote-tab-session-key</span>: <span class="hljs-string">&#x27;&#x27;</span>;
  <span class="hljs-attr">--cfg-cdn-cname</span>: <span class="hljs-string">&#x27;https://ucarecdn.com&#x27;</span>;
  <span class="hljs-attr">--cfg-base-url</span>: <span class="hljs-string">&#x27;https://upload.uploadcare.com&#x27;</span>;
  <span class="hljs-attr">--cfg-secure-signature</span>: <span class="hljs-string">&#x27;&#x27;</span>;
  <span class="hljs-attr">--cfg-secure-expire</span>: <span class="hljs-string">&#x27;&#x27;</span>;
  <span class="hljs-attr">--cfg-secure-delivery-proxy</span>: <span class="hljs-string">&#x27;&#x27;</span>;
  <span class="hljs-attr">--cfg-retry-throttled-request-max-times</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--cfg-multipart-min-file-size</span>: <span class="hljs-number">26214400</span>; <span class="hljs-comment">/* 25MB */</span>
  <span class="hljs-attr">--cfg-multipart-chunk-size</span>: <span class="hljs-number">5242880</span>; <span class="hljs-comment">/* 5MB */</span>
  <span class="hljs-attr">--cfg-max-concurrent-requests</span>: <span class="hljs-number">4</span>;
  <span class="hljs-attr">--cfg-multipart-max-attempts</span>: <span class="hljs-number">3</span>;
  <span class="hljs-attr">--cfg-check-for-url-duplicates</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--cfg-save-url-for-recurrent-uploads</span>: <span class="hljs-number">0</span>;

  <span class="hljs-attr">--cfg-group-output</span>: <span class="hljs-number">0</span>;
}
</code></pre>
<p>As you can see, all properties are grouped for the set of selectors:</p>
<ul>
<li><code>.lr-wgt-cfg</code> - specific selector for the configuration section in common CSS</li>
<li><code>.lr-wgt-common</code> - common class for all types of settings and CSS data</li>
<li><code>:host</code> - Shadow DOM root element selector (used when Shadow DOM is enabled)</li>
</ul>
<p>The variable value should be a correct JSON value. Strings should be taken in quotes. We use the 1 or 0 numbers to define boolean flags.</p>
<p>Any configuration value can be defined and redefined at any level of the DOM tree regarding CSS selector specificity.</p>
<h2 id="parameters-description">Parameters description</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th align="center">Values</th>
<th align="center">Default</th>
</tr>
</thead>
<tbody><tr>
<td><code>--cfg-pubkey</code></td>
<td>Your project Public Key</td>
<td align="center">string</td>
<td align="center"><code>YOUR_PUBLIC_KEY</code></td>
</tr>
<tr>
<td><code>--cfg-multiple</code></td>
<td>Allow to upload multiple files</td>
<td align="center"><code>1</code> or <code>0</code></td>
<td align="center"><code>1</code></td>
</tr>
<tr>
<td><code>--cfg-multiple-min</code></td>
<td>Minimum number of files that can be selected.</td>
<td align="center">number</td>
<td align="center">none</td>
</tr>
<tr>
<td><code>--cfg-multiple-max</code></td>
<td>Maximum number of files that can be selected.</td>
<td align="center">number</td>
<td align="center">none</td>
</tr>
<tr>
<td><code>--cfg-confirm-upload</code></td>
<td>Enables user confirmation for upload starting</td>
<td align="center"><code>1</code> or <code>0</code></td>
<td align="center"><code>1</code></td>
</tr>
<tr>
<td><code>--cfg-img-only</code></td>
<td>Accept images only</td>
<td align="center"><code>1</code> or <code>0</code></td>
<td align="center"><code>0</code></td>
</tr>
<tr>
<td><code>--cfg-accept</code></td>
<td>Native file input accept attribute value</td>
<td align="center"><code>&#39;image/*&#39;</code></td>
<td align="center">none</td>
</tr>
<tr>
<td><code>--cfg-store</code></td>
<td>Store files</td>
<td align="center"><code>1</code> or <code>0</code></td>
<td align="center">-</td>
</tr>
<tr>
<td><code>--cfg-camera-mirror</code></td>
<td>Flip camera image</td>
<td align="center"><code>1</code> or <code>0</code></td>
<td align="center"><code>0</code></td>
</tr>
<tr>
<td><code>--cfg-source-list</code></td>
<td>Comma-separated list of file sources. See <a href="./source-list/">here</a> for details</td>
<td align="center"><code>&#39;local, url, camera&#39;</code></td>
<td align="center">none</td>
</tr>
<tr>
<td><code>--cfg-max-local-file-size-bytes</code></td>
<td>Maximum file size in bytes</td>
<td align="center">-</td>
<td align="center">none</td>
</tr>
<tr>
<td><code>--cfg-thumb-size</code></td>
<td>Image thumbnail size</td>
<td align="center"><code>76</code></td>
<td align="center"><code>76</code></td>
</tr>
<tr>
<td><code>--cfg-show-empty-list</code></td>
<td>Show uploads list when it&#39;s empty</td>
<td align="center"><code>1</code> or <code>0</code></td>
<td align="center"><code>0</code></td>
</tr>
<tr>
<td><code>--cfg-use-local-image-editor</code></td>
<td>Enable local image editing</td>
<td align="center"><code>1</code> or <code>0</code></td>
<td align="center"><code>0</code></td>
</tr>
<tr>
<td><code>--cfg-use-cloud-image-editor</code></td>
<td>Enable cloud image editing</td>
<td align="center"><code>1</code> or <code>0</code></td>
<td align="center"><code>0</code></td>
</tr>
<tr>
<td><code>--cfg-remote-tab-session-key</code></td>
<td>Key to revoke Custom OAuth access. See <a href="https://uploadcare.com/docs/start/settings/#project-settings-advanced-oauth">docs</a> for details</td>
<td align="center">string</td>
<td align="center">none</td>
</tr>
<tr>
<td><code>--cfg-cdn-cname</code></td>
<td>Set Custom CNAME. See <a href="https://uploadcare.com/docs/delivery/cdn/#custom-cdn-cname">docs</a> for details</td>
<td align="center">string</td>
<td align="center"><code>https://ucarecdn.com</code></td>
</tr>
<tr>
<td><code>--cfg-base-url</code></td>
<td>Set custom upload URL.</td>
<td align="center">string</td>
<td align="center"><code>https://upload.uploadcare.com</code></td>
</tr>
<tr>
<td><code>--cfg-secure-signature</code></td>
<td>Set <code>signature</code> for Secure Uploads. See <a href="https://uploadcare.com/docs/security/secure-uploads/#expire-explained">docs</a> for details</td>
<td align="center">string</td>
<td align="center">none</td>
</tr>
<tr>
<td><code>--cfg-secure-expire</code></td>
<td>Set <code>expire</code> for Secure Uploads. See <a href="https://uploadcare.com/docs/security/secure-uploads/#expire-explained">docs</a> for details</td>
<td align="center">string</td>
<td align="center">none</td>
</tr>
<tr>
<td><code>--cfg-secure-delivery-proxy</code></td>
<td>Set proxy URL template for Secure Delivery. See <a href="./secure-delivery-proxy/">here</a> for details</td>
<td align="center">string</td>
<td align="center">none</td>
</tr>
<tr>
<td><code>--cfg-group-output</code></td>
<td>Enables files group creation</td>
<td align="center"><code>0</code></td>
<td align="center"><code>0</code></td>
</tr>
</tbody></table>
<h2 id="custom-configurations">Custom configurations</h2>
<p>You can create your own custom parameters and values for your custom blocks:</p>
<pre><code class="language-css"><span class="hljs-selector-class">.my-custom-config</span> {
  <span class="hljs-attr">--cfg-my-custom-property</span>: <span class="hljs-string">&#x27;SOME VALUE&#x27;</span>;
}
</code></pre>
<p>Then you can read it in your upload-block:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BlockComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;upload-blocks/BlockComponent/BlockComponent.js&#x27;</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBlock</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BlockComponent</span> {
  <span class="hljs-title function_">initCallback</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">let</span> statePropName = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindCssData</span>(<span class="hljs-string">&#x27;--cfg-my-custom-property&#x27;</span>);
    <span class="hljs-comment">// ^ this will return &#x27;*--cfg-my-custom-property&#x27;</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sub</span>(statePropName, <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val);
    });
  }
}
</code></pre>
<h2 id="dynamic-configuration">Dynamic configuration</h2>
<h3 id="via-style-property">via <code>style</code> property</h3>
<p>We&#39;re handle <code>style</code> property updates automatically.
It means that you can update your configuration in the following way:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> uploader = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;lr-uploader&#x27;</span>);
uploader.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">&#x27;--cfg-source-list&#x27;</span>, <span class="hljs-string">&#x27;local, url&#x27;</span>);
</code></pre>
<h3 id="via-class-property">via <code>class</code> property</h3>
<p>If you want to switch the whole configuration CSS class,
you need to call method <code>updateCssData()</code> explicitly.</p>
<pre><code class="language-css"><span class="hljs-selector-class">.config-1</span> {
  <span class="hljs-attr">--cfg-source-list</span>: <span class="hljs-string">&#x27;local, url&#x27;</span>;
}
<span class="hljs-selector-class">.config-2</span> {
  <span class="hljs-attr">--cfg-source-list</span>: <span class="hljs-string">&#x27;local, camera&#x27;</span>;
}
</code></pre>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-uploader</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;lr-wgt-common config-1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-uploader</span>&gt;</span>
</code></pre>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> uploader = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;lr-uploader&#x27;</span>);
uploader.<span class="hljs-property">classList</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&#x27;config-1&#x27;</span>, <span class="hljs-string">&#x27;config-2&#x27;</span>);
uploader.<span class="hljs-title function_">updateCssData</span>();
</code></pre>
<h2 id="extended-configuration-using-js-api">Extended configuration using JS API</h2>
<p>To set configuration properties with complex data types, you can use JS API on any block.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>setUploadMetadata(metadata: {})</code></td>
<td>File Metadata. See <a href="https://uploadcare.com/api-refs/rest-api/v0.7.0/#tag/File-metadata">docs</a></td>
</tr>
</tbody></table>
<p>Example:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> uploader = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;lr-uploader&#x27;</span>);
uploader.<span class="hljs-title function_">setUploadMetadata</span>({ <span class="hljs-attr">foo</span>: <span class="hljs-string">&#x27;bar&#x27;</span> });
</code></pre>
</col-css>
    </main>
    <footer>Â© 2022 ðŸ¦†</footer>
  </body>
</html>
