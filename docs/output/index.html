<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>blocks</title>
    <script async src="https://unpkg.com/es-module-shims@1.5.8/dist/es-module-shims.js"></script>
    <script type="importmap">{
  "imports": {
    "@symbiotejs/symbiote": "https://cdn.skypack.dev/-/@symbiotejs/symbiote@v1.10.5-NLgLW1XQCe5drkP3wBQX/dist=es2019,mode=imports/optimized/@symbiotejs/symbiote.js",
    "@uploadcare/upload-client": "https://ga.jspm.io/npm:@uploadcare/upload-client@4.3.1/dist/index.browser.js"
  }
}
</script>
    <script type="module" src="https://unpkg.com/@re4ma/re4ma@0.1.7/build/re4ma.js"></script>
    <script type="module">
      import { LiveHtml } from '../../blocks/LiveHtml/LiveHtml.js';
      LiveHtml.reg('lr-live-html');
    </script>
    <style> @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');:root{--clr-bg:rgb(31 29 29);--clr-font:rgb(224 253 255);--clr-link:rgb(253 255 139);--clr-panel:rgb(255 255 255 / 10%);--clr-accent:rgb(233 159 255);--clr-accent-shade:rgb(233 159 255 / 6%);--clr-code:#fff;--clr-code-hl:rgb(255 112 112);--gap-min:2px;--gap-mid:10px;--gap-max:20px;--gap-huge:60px;}html,body{margin:0;padding:0;color:var(--clr-font);font-family:Roboto,sans-serif;background-color:var(--clr-bg);}body{display:grid;grid-template-rows:min-content min-content auto min-content;min-height:100vh;}header{padding:20px;background-color:rgba(0,0,0,.4);}nav{--l-bg-clr:rgba(60,60,60,.9);--blur:6px;display:flex;justify-content:center;position:sticky;z-index:10000;top:0;background-color:var(--l-bg-clr);height:100%;}@supports ((-webkit-backdrop-filter:blur(var(--blur))) or (backdrop-filter:blur(var(--blur)))){nav{--l-bg-clr:rgba(255,255,255,.1);backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));}}nav > div{display:flex;justify-content:space-around;align-items:center;width:100%;max-width:1080px;}nav a{display:block;color:var(--clr-font);margin:20px;text-decoration:none;text-shadow:1px 1px 2px rgba(0,0,0,.6);}main{display:flex;justify-content:center;padding:20px;}col-css{display:block;max-width:1080px;width:100%;}footer{padding:20px;background-color:rgba(0,0,0,.2);}lr-live-html{min-height:400px;}main a{color:var(--clr-link);}code{display:block;background-color:#000;color:var(--clr-code);padding:var(--gap-max);overflow-x:auto;}code .hl{color:var(--clr-code-hl);}code:not([class]){display:inline-block;padding:var(--gap-min);padding-left:.5em;padding-right:.5em;}blockquote{display:block;color:var(--clr-accent);background-color:var(--clr-accent-shade);padding:var(--gap-mid);margin:0;margin-top:var(--gap-max);border-left:var(--gap-min) solid currentColor;}h1{color:var(--clr-accent);}h2{margin-top:calc(var(--gap-max) * 3);}li{margin-bottom:var(--gap-mid);}table{width:100%;}th{padding:10px;background:rgba(0,0,0,.4);}td{padding:10px;background:rgba(255,255,255,.1);}tr:hover{background:rgba(255,255,255,.1);}lr-live-html{display:grid;grid-template-columns:50% 50%;box-shadow:0 5px 16px rgb(0 0 0 / 60%);}lr-live-html [contenteditable]{padding:20px;overflow:auto;color:rgb(255 255 255);font-size:14px;font-family:monospace;white-space:pre;background-color:#000;outline:none;}lr-live-html [contenteditable] .hljs-string{color:rgb(251,182,79);}lr-live-html [contenteditable] .hljs-comment{color:rgb(149,149,149);font-style:italic;}lr-live-html [contenteditable] .hljs-attr{color:rgb(138,218,172);}lr-live-html [contenteditable] .hljs-function{color:rgb(239,235,149);}lr-live-html [contenteditable] .hljs-variable{color:rgb(121,183,255);}lr-live-html [contenteditable] .hljs-title{color:rgb(180,243,255);}lr-live-html [contenteditable] .hljs-property{color:rgb(238,131,252);}lr-live-html [contenteditable] .hljs-keyword{color:rgb(254,165,176);}lr-live-html [contenteditable] .hljs-tag{color:rgb(254,165,176);}lr-live-html [contenteditable] .hljs-name{color:rgb(165,245,254);}lr-live-html iframe{display:block;width:100%;height:100%;background-color:#fff;border:0;}lr-live-html{display:grid;grid-template-columns:50% 50%;box-shadow:0 5px 16px rgb(0 0 0 / 60%);}code{padding:20px;overflow:auto;color:rgb(255 255 255);font-size:14px;font-family:monospace;white-space:pre;background-color:#000;outline:none;}code .hljs-string{color:rgb(251,182,79);}code .hljs-comment{color:rgb(149,149,149);font-style:italic;}code .hljs-attr{color:rgb(138,218,172);}code .hljs-function{color:rgb(239,235,149);}code .hljs-variable{color:rgb(121,183,255);}code .hljs-title{color:rgb(180,243,255);}code .hljs-property{color:rgb(238,131,252);}code .hljs-keyword{color:rgb(254,165,176);}code .hljs-tag{color:rgb(254,165,176);}code .hljs-name{color:rgb(165,245,254);}lr-live-html iframe{display:block;width:100%;height:100%;background-color:#fff;border:0;}</style>
  </head>
  <body>
    <header>ðŸŸ¡ Uploadcare | blocks</header>
    <nav>
      <div>
        <a href="../../">Home</a>
        <a href="../../solutions/">Solutions</a>
        <a href="../../blocks/">Blocks</a>
        <a href="../../toc.html">TOC</a>
        <a href="//github.com/uploadcare/uc-blocks/discussions">Discussions</a>
      </div>
    </nav>
    <main>
      <col-css><h1 id="upload-data-output">Upload data output</h1>
<h2 id="basics">Basics</h2>
<p>As the result of file uploading process, we getting some data, which needs to be processed somehow by the host application. There is dedicated block provided for this purpose: <code>lr-data-output</code>.</p>
<p>This element can be used to interact with a native HTML-forms or to extract the data in your javascript code.</p>
<p>The first step, is creating an output HTML-element somewhere in your application markup:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-data-output</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-data-output</span>&gt;</span>
</code></pre>
<p>You need to provide data context name to bind certain uploader instance to the output-element instance:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-data-output</span> <span class="hljs-attr">ctx-name</span>=<span class="hljs-string">&quot;&lt;MY_CTX&gt;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-data-output</span>&gt;</span>
</code></pre>
<p>Then you need to enable data event firing:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-data-output</span> <span class="hljs-attr">ctx-name</span>=<span class="hljs-string">&quot;&lt;MY_CTX&gt;&quot;</span> <span class="hljs-attr">use-event</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-data-output</span>&gt;</span>
</code></pre>
<p>Now this element fires the event each time when user finished uploading workflow:</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> outputElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;lr-data-output&#x27;</span>);

outputElement.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;lr-data-output&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">detail</span>);
  <span class="hljs-comment">// or</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(outputElement.<span class="hljs-property">value</span>);
});
</code></pre>
<p>You also can enable browser console output for the setup testing:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-data-output</span> <span class="hljs-attr">ctx-name</span>=<span class="hljs-string">&quot;&lt;MY_CTX&gt;&quot;</span> <span class="hljs-attr">use-event</span> <span class="hljs-attr">use-console</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-data-output</span>&gt;</span>
</code></pre>
<h2 id="forms">Forms</h2>
<p>It&#39;s possible to use <code>lr-data-output</code> inside the native <a href="https://developer.mozilla.org/ru/docs/Web/HTML/Element/form">HTML forms</a>:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-data-output</span> <span class="hljs-attr">ctx-name</span>=<span class="hljs-string">&quot;&lt;MY_CTX&gt;&quot;</span> <span class="hljs-attr">form-value</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-data-output</span>&gt;</span>
</code></pre>
<p>In this case, a <code>hidden</code> <code>input</code> element will be created, and whole uploading result will be provided as the text input value.</p>
<h2 id="output-data-rendering">Output data rendering</h2>
<p>It&#39;s possible to render the output data using <a href="https://github.com/symbiotejs/symbiote.js">Symbiote.js</a> features:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-data-output</span> <span class="hljs-attr">ctx-name</span>=<span class="hljs-string">&quot;&lt;MY_CTX&gt;&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Upload result:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">repeat</span>=<span class="hljs-string">&quot;filesData&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{uuid}}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">lr-data-output</span>&gt;</span>
</code></pre>
<h3 id="how-it-works">How it works:</h3>
<p>Symbiote component allows to take <a href="https://symbiotejs.org/?control_capture">control of it&#39;s nested markup</a> and to use it as component&#39;s template. And you can use the canonical Symbiote.js <a href="https://symbiotejs.org/?list">dynamic list rendering</a> for the uploading data representation. As you can see, all you need is just to add some additional HTML. That&#39;s it.</p>
</col-css>
    </main>
    <footer>Â© 2022 ðŸ¦†</footer>
  </body>
</html>
