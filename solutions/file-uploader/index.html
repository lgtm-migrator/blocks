<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>blocks</title>
    <script async src="https://unpkg.com/es-module-shims@1.5.8/dist/es-module-shims.js"></script>
    <script type="importmap">{
  "imports": {
    "@symbiotejs/symbiote": "https://cdn.skypack.dev/-/@symbiotejs/symbiote@v1.10.6-apukuw5vDJ409qroKUtX/dist=es2019,mode=imports,min/optimized/@symbiotejs/symbiote.js",
    "@uploadcare/upload-client": "https://ga.jspm.io/npm:@uploadcare/upload-client@4.3.1/dist/index.browser.js"
  }
}
</script>
    <script type="module" src="https://unpkg.com/@re4ma/re4ma@0.1.7/build/re4ma.js"></script>
    <script type="module">
      import { LiveHtml } from '../../blocks/LiveHtml/LiveHtml.js';
      LiveHtml.reg('lr-live-html');
    </script>
    <style> @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');:root{--clr-bg:rgb(31 29 29);--clr-font:rgb(224 253 255);--clr-link:rgb(253 255 139);--clr-panel:rgb(255 255 255 / 10%);--clr-accent:rgb(233 159 255);--clr-accent-shade:rgb(233 159 255 / 6%);--clr-code:#fff;--clr-code-hl:rgb(255 112 112);--gap-min:2px;--gap-mid:10px;--gap-max:20px;--gap-huge:60px;}html,body{margin:0;padding:0;color:var(--clr-font);font-family:Roboto,sans-serif;background-color:var(--clr-bg);}body{display:grid;grid-template-rows:min-content min-content auto min-content;min-height:100vh;}header{padding:20px;background-color:rgba(0,0,0,.4);}nav{--l-bg-clr:rgba(60,60,60,.9);--blur:6px;display:flex;justify-content:center;position:sticky;z-index:10000;top:0;background-color:var(--l-bg-clr);height:100%;}@supports ((-webkit-backdrop-filter:blur(var(--blur))) or (backdrop-filter:blur(var(--blur)))){nav{--l-bg-clr:rgba(255,255,255,.1);backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));}}nav > div{display:flex;justify-content:space-around;align-items:center;width:100%;max-width:1080px;}nav a{display:block;color:var(--clr-font);margin:20px;text-decoration:none;text-shadow:1px 1px 2px rgba(0,0,0,.6);}main{display:flex;justify-content:center;padding:20px;}col-css{display:block;max-width:1080px;width:100%;}footer{padding:20px;background-color:rgba(0,0,0,.2);}lr-live-html{min-height:400px;}main a{color:var(--clr-link);}code{display:block;background-color:#000;color:var(--clr-code);padding:var(--gap-max);overflow-x:auto;}code .hl{color:var(--clr-code-hl);}code:not([class]){display:inline-block;padding:var(--gap-min);padding-left:.5em;padding-right:.5em;}blockquote{display:block;color:var(--clr-accent);background-color:var(--clr-accent-shade);padding:var(--gap-mid);margin:0;margin-top:var(--gap-max);border-left:var(--gap-min) solid currentColor;}h1{color:var(--clr-accent);}h2{margin-top:calc(var(--gap-max) * 3);}li{margin-bottom:var(--gap-mid);}table{width:100%;}th{padding:10px;background:rgba(0,0,0,.4);}td{padding:10px;background:rgba(255,255,255,.1);}tr:hover{background:rgba(255,255,255,.1);}lr-live-html{display:grid;grid-template-columns:50% 50%;box-shadow:0 5px 16px rgb(0 0 0 / 60%);}lr-live-html [contenteditable]{padding:20px;overflow:auto;color:rgb(255 255 255);font-size:14px;font-family:monospace;white-space:pre;background-color:#000;outline:none;}lr-live-html [contenteditable] .hljs-string{color:rgb(251,182,79);}lr-live-html [contenteditable] .hljs-comment{color:rgb(149,149,149);font-style:italic;}lr-live-html [contenteditable] .hljs-attr{color:rgb(138,218,172);}lr-live-html [contenteditable] .hljs-function{color:rgb(239,235,149);}lr-live-html [contenteditable] .hljs-variable{color:rgb(121,183,255);}lr-live-html [contenteditable] .hljs-title{color:rgb(180,243,255);}lr-live-html [contenteditable] .hljs-property{color:rgb(238,131,252);}lr-live-html [contenteditable] .hljs-keyword{color:rgb(254,165,176);}lr-live-html [contenteditable] .hljs-tag{color:rgb(254,165,176);}lr-live-html [contenteditable] .hljs-name{color:rgb(165,245,254);}lr-live-html iframe{display:block;width:100%;height:100%;background-color:#fff;border:0;}lr-live-html{display:grid;grid-template-columns:50% 50%;box-shadow:0 5px 16px rgb(0 0 0 / 60%);}code{padding:20px;overflow:auto;color:rgb(255 255 255);font-size:14px;font-family:monospace;white-space:pre;background-color:#000;outline:none;}code .hljs-string{color:rgb(251,182,79);}code .hljs-comment{color:rgb(149,149,149);font-style:italic;}code .hljs-attr{color:rgb(138,218,172);}code .hljs-function{color:rgb(239,235,149);}code .hljs-variable{color:rgb(121,183,255);}code .hljs-title{color:rgb(180,243,255);}code .hljs-property{color:rgb(238,131,252);}code .hljs-keyword{color:rgb(254,165,176);}code .hljs-tag{color:rgb(254,165,176);}code .hljs-name{color:rgb(165,245,254);}lr-live-html iframe{display:block;width:100%;height:100%;background-color:#fff;border:0;}</style>
  </head>
  <body>
    <header>üü° Uploadcare | blocks</header>
    <nav>
      <div>
        <a href="../../">Home</a>
        <a href="../../solutions/">Solutions</a>
        <a href="../../blocks/">Blocks</a>
        <a href="../../toc.html">TOC</a>
        <a href="//github.com/uploadcare/blocks/discussions">Discussions</a>
      </div>
    </nav>
    <main>
      <col-css><h1 id="lr-uploader">lr-uploader</h1>
<p>Here you can find the set of ready-made uploaders for the most frequent file uploading cases.
Each uploader is highly customizable on its own and could be used as a custom build reference, but you can use it as is.</p>
<p>Uploader builds list:</p>
<ul>
<li><a href="./regular/">Regular case</a> - the most common solution.</li>
<li><a href="./inline/">Inline case</a> - no modals, could be used just in place.</li>
<li><a href="./minimal/">Minimal case</a> - minimal and compact.</li>
</ul>
<p><re-htm src="../../assets/htm/regular-uploader-solution-demo.htm"></re-htm></p>
<h2 id="üíé-solution-benefits">üíé Solution benefits</h2>
<ul>
<li>No heavy dependencies.</li>
<li>Uniform and seamless integration flow for all major web development stacks.</li>
<li>CSP (Content Security Policy) compatible: no <code>unsafe-inline</code> flags for the CSS or JavaScript are needed.</li>
<li>Modern and efficient technologies under the hood.</li>
<li>Multiple file source (local, any external URL, cloud services, and social networks) support.</li>
<li>Open source (MIT license).</li>
<li>Built with love ‚ù§Ô∏è</li>
</ul>
<h3 id="supported-browsers">Supported browsers</h3>
<p>Uploader is supported in all major modern <a href="https://github.com/uploadcare/jsdk#supported-browsers">browsers</a>.</p>
<p><a href="https://uploadcare.com/blog/uploadcare-stops-internet-explorer-support/">Internet Explorer</a> is outdated and not supported anymore.</p>
<h2 id="receiving-upload-data">Receiving upload data</h2>
<pre><code class="language-js"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;LR_DATA_OUTPUT&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">detail</span>);
});
</code></pre>
<p>More information about upload events you can find <a href="../../docs/events/">here</a>.</p>
<h3 id="application-markup">Application markup</h3>
<p>After connection, use the <code>&lt;lr-uploader&gt;</code> tag in your application markup:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-uploader</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-uploader</span>&gt;</span>
</code></pre>
<p>Note that all configurations, localization texts, icons, and styling are placed into CSS file, so you should connect the default one (or create your own):</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">
  <span class="hljs-keyword">@import</span> url(<span class="hljs-attribute">https</span>://cdn.skypack.dev/@uploadcare/blocks/web/file-uploader-regular.min.css);
  <span class="hljs-selector-class">.my-settings</span> {
    <span class="hljs-attr">--ctx-name</span>: <span class="hljs-string">&#x27;my-uploader&#x27;</span>;
    <span class="hljs-attr">--cfg-pubkey</span>: <span class="hljs-string">&#x27;demopublickey&#x27;</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">lr-uploader</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-settings lr-wgt-common&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">lr-uploader</span>&gt;</span>
</code></pre>
<ul>
<li><code>lr-wgt-common</code> - is a pre-defined common CSS class containing all basic uploader parameters.</li>
</ul>
<h3 id="shadow-dom">Shadow DOM</h3>
<p>If you need additional isolation and styling security levels, you can get it with Shadow DOM.
To enable it and encapsulate all styles into separated scope, use the <code>css-src</code> attribute:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-uploader</span> <span class="hljs-attr">css-src</span>=<span class="hljs-string">&quot;https://cdn.skypack.dev/@uploadcare/blocks/web/file-uploader-regular.min.css&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">lr-uploader</span>&gt;</span>
</code></pre>
<h3 id="custom-tags-naming-convention">Custom tags naming convention</h3>
<p>By design, all custom elements should have a dash symbol (<code>-</code>) in their names.
All custom tags used in uploader are prefixed with the <code>lr-</code> part.</p>
<p>Examples:</p>
<pre><code class="language-html">...
<span class="hljs-tag">&lt;<span class="hljs-name">lr-icon</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-icon</span>&gt;</span>
...
<span class="hljs-tag">&lt;<span class="hljs-name">lr-button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-button</span>&gt;</span>
...
<span class="hljs-tag">&lt;<span class="hljs-name">lr-whatever</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-whatever</span>&gt;</span>
...
</code></pre>
<p>So, to exclude naming collisions, use the other prefixes for your own custom elements.</p>
<p>Examples:</p>
<pre><code class="language-html">...
<span class="hljs-tag">&lt;<span class="hljs-name">my-own-icon</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-own-icon</span>&gt;</span>
...
<span class="hljs-tag">&lt;<span class="hljs-name">my-own-button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-own-button</span>&gt;</span>
...
<span class="hljs-tag">&lt;<span class="hljs-name">my-own-whatever</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-own-whatever</span>&gt;</span>
...
</code></pre>
<h2 id="üõ†-configuration">üõ† Configuration</h2>
<p>There are two major parameters you should know about first of all:</p>
<ol>
<li>Your Uploadcare project public key: <code>--cfg-pubkey: &#39;YOUR_PUBLIC_KEY&#39;;</code>.</li>
<li>Workflow context name: <code>--ctx-name: &#39;CONTEXT_NAME&#39;;</code>.</li>
</ol>
<h3 id="public-key">Public key</h3>
<p>You should obtain a Public API Key in your <a href="https://app.uploadcare.com/projects/-/api-keys/">Uploadcare project&#39;s dashboard</a> to use file uploading features.</p>
<p>For demo-only purposes, you can use <code>demopublickey</code> instead.</p>
<h3 id="context-name">Context name</h3>
<p>Our concept of workflow contexts is very similar to native HTML <code>name</code> attributes for the &quot;radio&quot; inputs.
When you use the same names, elements act in one common context.
In the case of &quot;radio&quot; inputs, all elements in the same context will know the state of the others (and you can make only one possible selection).</p>
<p>In the case of uploader, you can also set the context with a <code>ctx-name</code> attribute or <code>--ctx-name</code> custom CSS property.
That helps to create the link between each uploader instance and its internal or external entities.
By default, context will be created automatically, but if you need to bind uploader to some other workflow, you can use the following approach:</p>
<pre><code class="language-html">...
<span class="hljs-tag">&lt;<span class="hljs-name">lr-uploader</span> <span class="hljs-attr">ctx-name</span>=<span class="hljs-string">&quot;my-uploading-workflow&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-uploader</span>&gt;</span>
...
<span class="hljs-tag">&lt;<span class="hljs-name">lr-data-output</span> <span class="hljs-attr">ctx-name</span>=<span class="hljs-string">&quot;my-uploading-workflow&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">lr-data-output</span>&gt;</span>
...
</code></pre>
<p>For more information, please visit <a href="https://symbiotejs.org/?context">&quot;context&quot; section</a> in Symbiote.js documentation.</p>
<h3 id="css-custom-properties">CSS custom properties</h3>
<p>All configurations could be provided via the set of <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties">CSS-variables</a>:</p>
<pre><code class="language-css"><span class="hljs-selector-class">.my-settings</span> {
  <span class="hljs-attr">--cfg-pubkey</span>: <span class="hljs-string">&#x27;demopublickey&#x27;</span>;
  <span class="hljs-attr">--cfg-multiple</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--cfg-img-only</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--cfg-source-list</span>: <span class="hljs-string">&#x27;local, url, camera, dropbox, gdrive, facebook&#x27;</span>;
  ...;
}
</code></pre>
<p>The variable value should be a correct JSON value. Strings should be taken in quotes. We use the <code>1</code> or <code>0</code> numbers to define boolean flags.</p>
<p>Any configuration value can be defined and redefined at any DOM-tree level regarding CSS selector specificity.</p>
<p>More details about configuration parameters you can find <a href="../../docs/configuration/">here</a>.</p>
<h2 id="üéÄ-styling">üéÄ Styling</h2>
<p>For the look &amp; feel customization, you can use the &quot;Elements&quot; section in your browser developer tools panel.
It&#39;s easy to find any uploader inner components and their contents because they have custom tag names.
You don&#39;t need any specific tools, unlike with such libraries as React.
Those tag names could be used as convenient CSS selectors.</p>
<p>There are three major levels of possible styling customizations:</p>
<ol>
<li>Light and dark theme flag: <code>--darkmode:1;</code> (enabled) or <code>--darkmode:0;</code> (disabled).</li>
<li>The set of basic CSS variables used for the other styling calculations.</li>
<li>Custom CSS rules for each element.</li>
</ol>
<p>For more details, please follow this <a href="../../blocks/themes/lr-basic/">guide</a>.</p>
<h2 id="üü¢-csp-settings">üü¢ CSP settings</h2>
<p>If the application works with sensitive user data, such as personal photos, it is recommended to increase its security with <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">CSP settings</a>. Uploader is using <code>Blob</code> URLs for on-the-flight generated images and the stylesheets in some cases, so don&#39;t forget to add <code>blob:</code> source into the CSP settings:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span>
  <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;style-src &#x27;self&#x27; blob:; script-src &#x27;self&#x27;; img-src &#x27;self&#x27; https://ucarecdn.com blob:;&quot;</span>
/&gt;</span>
</code></pre>
<h2 id="üì§-data-output">üì§ Data output</h2>
<p>We provide the dedicated block for the data output purposes - <code>&lt;lr-data-output&gt;</code>.
This Custom Element can be connected to some workflow context and provide you with convenient data access.</p>
<p>Here is the code example:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">lr-data-output</span> <span class="hljs-attr">console</span> <span class="hljs-attr">fire-events</span> <span class="hljs-attr">item-template</span>=<span class="hljs-string">&quot;&lt;img src=&#x27;https://ucarecdn.com/{{uuid}}/-/preview/&#x27; /&gt;&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">lr-data-output</span>&gt;</span>
</code></pre>
<p>Let&#39;s walk through its attributes:</p>
<ul>
<li><code>console</code> - this flag lets you enable browser console output without modifying the source code.</li>
<li><code>fire-events</code> - this flag enables custom events (<code>data-output</code>) dispatching for the DOM element. These events contain all uploading data and could be processed at any level of your application.</li>
<li><code>from</code> - data output could be connected to any field in the workflow context. You can specify the certain one. By default, it is a <code>*dataOutput</code>; you can skip this setting for the default uploading case.</li>
<li><code>item-template</code> - uploading results could be rendered as a list of nested DOM elements. You can specify a simple template for that.</li>
<li><code>form-value</code> - could be used to handle HTML-forms.</li>
</ul>
</col-css>
    </main>
    <footer>¬© 2022 ü¶Ü</footer>
  </body>
</html>
